<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="https://thpesante.github.io/mobilsolutions/">
    <title>Reporte de Ventas - Yalopido</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="reportes.css">
    <!-- Librería para generar archivos Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">Yalopido</div>
            <div class="user-info">
                <img id="user-profile-pic" src="" alt="Foto de perfil" style="width: 50px; height: 50px; border-radius: 50%; display: none;">
                <p id="user-name"></p>
            </div>
        </div>
        <ul class="sidebar-nav">
            <li onclick="navigateTo('pedidos.html')"><i class="fas fa-receipt"></i> Pedidos</li>
            <li onclick="navigateTo('ofertas.html')"><i class="fas fa-tags"></i> Ofertas</li>
            <li onclick="navigateTo('productos.html')"><i class="fas fa-box-open"></i> Productos</li>
            <li onclick="navigateTo('producto-destacado.html')"><i class="fas fa-star"></i> Producto destacado</li>
            <li class="active" onclick="navigateTo('reportes.html')"><i class="fas fa-chart-line"></i> Reportes</li>
            <li onclick="navigateTo('cuenta.html')"><i class="fas fa-user-shield"></i> Cuenta</li>
        </ul>
        <div class="sidebar-footer"><button id="logout-btn">Cerrar Sesión</button></div>
    </aside>
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <main class="main-content">
        <header class="main-header"><button class="menu-btn" id="menu-btn"><i class="fas fa-bars"></i></button><h2>Reportes</h2></header>
        <h1 class="desktop-only">Reportes</h1>
        
        <div class="container">
            <h2>Reporte de Ventas por Fecha <button id="export-date-report-btn" class="btn-export" style="display:none;">Exportar a Excel</button></h2>
            <div class="report-controls">
                <div class="control-group"><label for="start-date">Fecha de Inicio</label><input type="date" id="start-date"></div>
                <div class="control-group"><label for="end-date">Fecha de Fin</label><input type="date" id="end-date"></div>
                <button id="generate-report-btn">Generar Reporte por Fecha</button>
            </div>
            <div id="report-results-container"><p>Selecciona un rango de fechas y haz clic en generar.</p></div>
        </div>

        <div class="container">
            <h2>Ranking de Productos Más Vendidos (Histórico) <button id="export-ranking-report-btn" class="btn-export" style="display:none;">Exportar a Excel</button></h2>
            <div id="most-purchased-container"><p>Calculando ranking de productos...</p></div>
        </div>

    </main>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="reportes.js"></script>
</body>
</html>
